<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel de Pedidos - FoodTruck do Pitiu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #FF6B00; /* Laranja do Pitiu */
      --secondary: #FF8C42;
      --dark: #2E2E2E;
      --light: #F8F8F8;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --info: #17a2b8;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    }
    
    body {
      background-color: #f5f5f5;
      color: #333;
      line-height: 1.6;
    }
    
    .dashboard {
      display: grid;
      grid-template-columns: 250px 1fr;
      min-height: 100vh;
    }
    
    /* Sidebar */
    .sidebar {
      background-color: var(--dark);
      color: white;
      padding: 20px 0;
      box-shadow: 2px 0 10px rgba(0,0,0,0.1);
    }
    
    .brand {
      display: flex;
      align-items: center;
      padding: 0 20px 20px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .brand img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
      border-radius: 50%;
    }
    
    .brand h1 {
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .nav-menu {
      margin-top: 20px;
    }
    
    .nav-item {
      padding: 12px 20px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
    }
    
    .nav-item:hover, .nav-item.active {
      background-color: rgba(255,255,255,0.1);
    }
    
    .nav-item i {
      margin-right: 10px;
      width: 20px;
      text-align: center;
    }
    
    /* Main Content */
    .main-content {
      padding: 20px;
      background-color: var(--light);
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #ddd;
    }
    
    .header h2 {
      color: var(--primary);
      font-weight: 600;
    }
    
    .user-info {
      display: flex;
      align-items: center;
    }
    
    .user-info img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }
    
    /* Cards */
    .stats-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .card {
      background: white;
      border-radius: 8px;
      padding: 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      transition: transform 0.3s;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .card-title {
      font-size: 0.9rem;
      color: #777;
      font-weight: 500;
    }
    
    .card-value {
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--dark);
    }
    
    .card-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    
    .card-icon.primary {
      background-color: var(--primary);
    }
    
    .card-icon.success {
      background-color: var(--success);
    }
    
    .card-icon.warning {
      background-color: var(--warning);
    }
    
    .card-icon.danger {
      background-color: var(--danger);
    }
    
    /* Orders Table */
    .orders-table {
      background: white;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }
    
    table {
      width: 100%;
      border-collapse: collapse;
    }
    
    th, td {
      padding: 15px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    
    th {
      background-color: var(--primary);
      color: white;
      font-weight: 500;
    }
    
    tr:hover {
      background-color: #f9f9f9;
    }
    
    .status {
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      text-align: center;
      display: inline-block;
    }
    
    .status.received {
      background-color: #d4edff;
      color: #004085;
    }
    
    .status.preparing {
      background-color: #fff3cd;
      color: #856404;
    }
    
    .status.ready {
      background-color: #d4edda;
      color: #155724;
    }
    
    .status.delivered {
      background-color: #e2e3e5;
      color: #383d41;
    }
    
    .btn {
      padding: 8px 15px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
    }
    
    .btn i {
      margin-right: 5px;
    }
    
    .btn-sm {
      padding: 5px 10px;
      font-size: 0.8rem;
    }
    
    .btn-primary {
      background-color: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background-color: #e05e00;
    }
    
    .btn-success {
      background-color: var(--success);
      color: white;
    }
    
    .btn-success:hover {
      background-color: #218838;
    }
    
    .btn-warning {
      background-color: var(--warning);
      color: #212529;
    }
    
    .btn-warning:hover {
      background-color: #e0a800;
    }
    
    .btn-danger {
      background-color: var(--danger);
      color: white;
    }
    
    .btn-danger:hover {
      background-color: #c82333;
    }
    
    .btn-outline {
      background-color: transparent;
      border: 1px solid #ddd;
      color: #555;
    }
    
    .btn-outline:hover {
      background-color: #f1f1f1;
    }
    
    /* Order Details Modal */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }
    
    .modal.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background-color: white;
      border-radius: 8px;
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      transform: translateY(-20px);
      transition: all 0.3s;
    }
    
    .modal.active .modal-content {
      transform: translateY(0);
    }
    
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .modal-title {
      font-size: 1.3rem;
      color: var(--primary);
      font-weight: 600;
    }
    
    .close-modal {
      font-size: 1.5rem;
      cursor: pointer;
      color: #777;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .order-info {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .info-group h4 {
      margin-bottom: 10px;
      color: #555;
    }
    
    .info-group p {
      background-color: #f9f9f9;
      padding: 10px;
      border-radius: 4px;
    }
    
    .order-items {
      margin: 20px 0;
    }
    
    .order-items h4 {
      margin-bottom: 15px;
      color: #555;
    }
    
    .item-list {
      border: 1px solid #eee;
      border-radius: 4px;
      overflow: hidden;
    }
    
    .item {
      display: flex;
      justify-content: space-between;
      padding: 10px 15px;
      border-bottom: 1px solid #eee;
    }
    
    .item:last-child {
      border-bottom: none;
    }
    
    .item-name {
      font-weight: 500;
    }
    
    .item-price {
      color: var(--primary);
      font-weight: 600;
    }
    
    .order-total {
      text-align: right;
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: 600;
    }
    
    .modal-footer {
      padding: 15px 20px;
      border-top: 1px solid #eee;
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }
    
    /* Responsive */
    @media (max-width: 992px) {
      .dashboard {
        grid-template-columns: 1fr;
      }
      
      .sidebar {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      .order-info {
        grid-template-columns: 1fr;
      }
      
      .stats-cards {
        grid-template-columns: 1fr 1fr;
      }
    }
    
    @media (max-width: 576px) {
      .stats-cards {
        grid-template-columns: 1fr;
      }
    }
    
    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid #ddd;
      margin-bottom: 20px;
    }
    
    .tab {
      padding: 10px 20px;
      cursor: pointer;
      border-bottom: 3px solid transparent;
      transition: all 0.3s;
    }
    
    .tab.active {
      border-bottom-color: var(--primary);
      color: var(--primary);
      font-weight: 500;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
    }
    
    /* Alert */
    .alert {
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
    }
    
    .alert i {
      margin-right: 10px;
      font-size: 1.2rem;
    }
    
    .alert-success {
      background-color: #d4edda;
      color: #155724;
    }
    
    .alert-danger {
      background-color: #f8d7da;
      color: #721c24;
    }
    
    /* Badge */
    .badge {
      display: inline-block;
      padding: 3px 7px;
      font-size: 0.75rem;
      font-weight: 600;
      line-height: 1;
      text-align: center;
      white-space: nowrap;
      vertical-align: baseline;
      border-radius: 10px;
      color: white;
    }
    
    .badge-primary {
      background-color: var(--primary);
    }
    
    .badge-secondary {
      background-color: #6c757d;
    }
    
    .badge-success {
      background-color: var(--success);
    }
    
    .badge-warning {
      background-color: var(--warning);
    }
    
    .badge-danger {
      background-color: var(--danger);
    }
  </style>
</head>
<body>
  <div class="dashboard">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="brand">
        <img src="logotipo1pitiu.png" alt="FoodTruck do Pitiu">
        <h1>Pitiu FoodTruck</h1>
      </div>
      
      <div class="nav-menu">
        <div class="nav-item active" onclick="openTab('dashboard')">
          <i class="fas fa-tachometer-alt"></i>
          <span>Dashboard</span>
        </div>
        <div class="nav-item" onclick="openTab('orders')">
          <i class="fas fa-clipboard-list"></i>
          <span>Pedidos</span>
          <span class="badge badge-primary" id="new-orders-badge">0</span>
        </div>
        <div class="nav-item" onclick="openTab('products')">
          <i class="fas fa-hamburger"></i>
          <span>Produtos</span>
        </div>
        <div class="nav-item" onclick="openTab('categories')">
          <i class="fas fa-tags"></i>
          <span>Categorias</span>
        </div>
        <div class="nav-item" onclick="openTab('settings')">
          <i class="fas fa-cog"></i>
          <span>Configurações</span>
        </div>
        <div class="nav-item" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i>
          <span>Sair</span>
        </div>
      </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
      <!-- Header -->
      <div class="header">
        <h2 id="page-title">Dashboard</h2>
        <div class="user-info">
          <img src="https://via.placeholder.com/40" alt="Usuário">
          <span>Administrador</span>
        </div>
      </div>
      
      <!-- Status Message -->
      <div id="status-message" class="alert" style="display: none;">
        <i class="fas fa-info-circle"></i>
        <span id="status-text"></span>
      </div>
      
      <!-- Dashboard Tab -->
      <div id="dashboard" class="tab-content active">
        <div class="stats-cards">
          <div class="card">
            <div class="card-header">
              <div class="card-title">Pedidos Hoje</div>
              <div class="card-icon primary">
                <i class="fas fa-shopping-bag"></i>
              </div>
            </div>
            <div class="card-value" id="orders-today">0</div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Receita Hoje</div>
              <div class="card-icon success">
                <i class="fas fa-dollar-sign"></i>
              </div>
            </div>
            <div class="card-value" id="revenue-today">R$ 0,00</div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Pedidos Pendentes</div>
              <div class="card-icon warning">
                <i class="fas fa-clock"></i>
              </div>
            </div>
            <div class="card-value" id="pending-orders">0</div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title">Pedidos Finalizados</div>
              <div class="card-icon danger">
                <i class="fas fa-check-circle"></i>
              </div>
            </div>
            <div class="card-value" id="completed-orders">0</div>
          </div>
        </div>
        
        <h3>Últimos Pedidos</h3>
        <div class="orders-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Itens</th>
                <th>Total</th>
                <th>Status</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="recent-orders">
              <!-- Últimos pedidos serão carregados aqui -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Orders Tab -->
      <div id="orders" class="tab-content">
        <div class="tabs">
          <div class="tab active" onclick="filterOrders('all')">Todos</div>
          <div class="tab" onclick="filterOrders('received')">Recebidos</div>
          <div class="tab" onclick="filterOrders('preparing')">Em Preparo</div>
          <div class="tab" onclick="filterOrders('ready')">Prontos</div>
          <div class="tab" onclick="filterOrders('delivered')">Entregues</div>
        </div>
        
        <div class="orders-table">
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Cliente</th>
                <th>Contato</th>
                <th>Itens</th>
                <th>Total</th>
                <th>Status</th>
                <th>Data</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="orders-list">
              <!-- Pedidos serão carregados aqui -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Products Tab -->
      <div id="products" class="tab-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>Produtos</h3>
          <button class="btn btn-primary" onclick="openProductModal()">
            <i class="fas fa-plus"></i> Adicionar Produto
          </button>
        </div>
        
        <div class="orders-table">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>Descrição</th>
                <th>Categoria</th>
                <th>Preço</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="products-list">
              <!-- Produtos serão carregados aqui -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Categories Tab -->
      <div id="categories" class="tab-content">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
          <h3>Categorias</h3>
          <button class="btn btn-primary" onclick="openCategoryModal()">
            <i class="fas fa-plus"></i> Adicionar Categoria
          </button>
        </div>
        
        <div class="orders-table">
          <table>
            <thead>
              <tr>
                <th>Nome</th>
                <th>ID</th>
                <th>Seção</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody id="categories-list">
              <!-- Categorias serão carregadas aqui -->
            </tbody>
          </table>
        </div>
      </div>
      
      <!-- Settings Tab -->
      <div id="settings" class="tab-content">
        <h3>Configurações do Sistema</h3>
        
        <div class="card" style="margin-bottom: 20px;">
          <div class="card-header">
            <h4>Informações do Estabelecimento</h4>
          </div>
          <div style="padding: 20px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
              <div>
                <label>Nome do Estabelecimento</label>
                <input type="text" id="business-name" class="form-control" value="FoodTruck do Pitiu" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              </div>
              <div>
                <label>URL do Logo</label>
                <input type="text" id="business-logo" class="form-control" value="logotipo1pitiu.png" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              </div>
            </div>
            
            <div style="margin-bottom: 15px;">
              <label>Localização</label>
              <input type="text" id="business-location" class="form-control" value="📍 Praça Saiqui, Vila Valqueire" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div style="margin-bottom: 15px;">
              <label>Descrição</label>
              <input type="text" id="business-description" class="form-control" value="🛵 Cardápio impresso::Instagram::Whatsapp: é só clicar ⤵️" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
          </div>
        </div>
        
        <div class="card" style="margin-bottom: 20px;">
          <div class="card-header">
            <h4>Configurações de Contato</h4>
          </div>
          <div style="padding: 20px;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
              <div>
                <label>Número do WhatsApp</label>
                <input type="text" id="whatsapp-number" class="form-control" value="5521992254487" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              </div>
              <div>
                <label>URL do Instagram</label>
                <input type="text" id="instagram-url" class="form-control" value="https://www.instagram.com/foodtruckdopitiu/" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
              </div>
            </div>
            
            <div style="margin-bottom: 15px;">
              <label>URL do Cardápio Impresso</label>
              <input type="text" id="menu-url" class="form-control" value="https://www.canva.com/design/DAFiXrcSAYE/SyFYhg2E6JroZstX3cA_hA/view?website#4" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
            
            <div style="margin-bottom: 15px;">
              <label>URL da Imagem de Fundo</label>
              <input type="text" id="background-image" class="form-control" value="backgroundfoodtruckpitiu.png" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
            </div>
          </div>
        </div>
        
        <div style="text-align: right;">
          <button class="btn btn-success" onclick="saveSettings()">
            <i class="fas fa-save"></i> Salvar Configurações
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Order Details Modal -->
  <div class="modal" id="order-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title">Detalhes do Pedido #<span id="order-id"></span></h3>
        <span class="close-modal" onclick="closeModal()">&times;</span>
      </div>
      
      <div class="modal-body">
        <div class="order-info">
          <div class="info-group">
            <h4>Cliente</h4>
            <p id="customer-name"></p>
          </div>
          
          <div class="info-group">
            <h4>Contato</h4>
            <p id="customer-contact"></p>
          </div>
          
          <div class="info-group">
            <h4>Data/Hora</h4>
            <p id="order-date"></p>
          </div>
          
          <div class="info-group">
            <h4>Status</h4>
            <p id="order-status"></p>
          </div>
          
          <div class="info-group">
            <h4>Método de Pagamento</h4>
            <p id="payment-method"></p>
          </div>
          
          <div class="info-group">
            <h4>Observações</h4>
            <p id="order-notes"></p>
          </div>
        </div>
        
        <div class="order-items">
          <h4>Itens do Pedido</h4>
          <div class="item-list" id="order-items">
            <!-- Itens do pedido serão carregados aqui -->
          </div>
        </div>
        
        <div class="order-total">
          Total: <span id="order-total"></span>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal()">
          <i class="fas fa-times"></i> Fechar
        </button>
        <button class="btn btn-primary" id="accept-order-btn" onclick="updateOrderStatus('preparing')">
          <i class="fas fa-check"></i> Aceitar Pedido
        </button>
        <button class="btn btn-success" id="prepare-order-btn" onclick="updateOrderStatus('ready')">
          <i class="fas fa-fire"></i> Pedido Pronto
        </button>
        <button class="btn btn-warning" id="complete-order-btn" onclick="updateOrderStatus('delivered')">
          <i class="fas fa-check-circle"></i> Marcar como Entregue
        </button>
        <button class="btn btn-danger" onclick="cancelOrder()">
          <i class="fas fa-trash"></i> Cancelar Pedido
        </button>
      </div>
    </div>
  </div>
  
  <!-- Product Modal -->
  <div class="modal" id="product-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="product-modal-title">Adicionar Produto</h3>
        <span class="close-modal" onclick="closeModal()">&times;</span>
      </div>
      
      <div class="modal-body">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
          <div>
            <label>Nome do Produto</label>
            <input type="text" id="product-name" class="form-control" placeholder="Ex: Cheese Bacon">
          </div>
          
          <div>
            <label>Preço (R$)</label>
            <input type="number" id="product-price" class="form-control" step="0.01" placeholder="Ex: 26.00">
          </div>
        </div>
        
        <div style="margin-bottom: 15px;">
          <label>Descrição</label>
          <textarea id="product-description" class="form-control" rows="3" placeholder="Ex: Blend da casa de 180g, bacon, queijo prato, mussarela e maionese da casa no pão brioche."></textarea>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px;">
          <div>
            <label>Categoria</label>
            <select id="product-category" class="form-control">
              <!-- Categorias serão preenchidas via JavaScript -->
            </select>
          </div>
          
          <div>
            <label>Seção (opcional)</label>
            <select id="product-section" class="form-control">
              <option value="">Nenhuma</option>
              <option value="salty">Salgado</option>
              <option value="sweet">Doce</option>
            </select>
          </div>
        </div>
        
        <div style="margin-bottom: 15px;">
          <label>URL da Imagem</label>
          <input type="text" id="product-image" class="form-control" placeholder="Ex: https://source.unsplash.com/random/300x300/?burger,4">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label>Tem adicionais?</label>
          <select id="product-addons" class="form-control">
            <option value="false">Não</option>
            <option value="true">Sim (para hambúrgueres)</option>
          </select>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal()">
          <i class="fas fa-times"></i> Cancelar
        </button>
        <button class="btn btn-success" onclick="saveProduct()">
          <i class="fas fa-save"></i> Salvar Produto
        </button>
      </div>
    </div>
  </div>
  
  <!-- Category Modal -->
  <div class="modal" id="category-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 class="modal-title" id="category-modal-title">Adicionar Categoria</h3>
        <span class="close-modal" onclick="closeModal()">&times;</span>
      </div>
      
      <div class="modal-body">
        <div style="margin-bottom: 15px;">
          <label>Nome da Categoria</label>
          <input type="text" id="category-name" class="form-control" placeholder="Ex: Hambúrgueres Artesanais">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label>ID (sem espaços ou acentos)</label>
          <input type="text" id="category-id" class="form-control" placeholder="Ex: hamburgueres">
        </div>
        
        <div style="margin-bottom: 15px;">
          <label>Seção (opcional)</label>
          <select id="category-section" class="form-control">
            <option value="">Nenhuma</option>
            <option value="salty">Salgado</option>
            <option value="sweet">Doce</option>
          </select>
        </div>
      </div>
      
      <div class="modal-footer">
        <button class="btn btn-outline" onclick="closeModal()">
          <i class="fas fa-times"></i> Cancelar
        </button>
        <button class="btn btn-success" onclick="saveCategory()">
          <i class="fas fa-save"></i> Salvar Categoria
        </button>
      </div>
    </div>
  </div>

  <script>





    

function loadData() {
  // Carrega pedidos do localStorage específico do admin
  orders = JSON.parse(localStorage.getItem('adminOrders')) || [];
  
  // Resto do código existente...
  
  // Verifica se há novos pedidos
  checkNewOrders();
}

// Atualize a função checkNewOrders
function checkNewOrders() {
  const hasNewOrder = localStorage.getItem('newOrderNotification') === 'true';
  
  if (hasNewOrder) {
    // Mostrar notificação
    showStatus('Novo pedido recebido!', 'success');
    
    // Remover a notificação
    localStorage.removeItem('newOrderNotification');
    
    // Atualizar a lista de pedidos
    updateDashboardStats();
    updateOrdersList();
  }
  
  // Atualizar badge de novos pedidos
  const newOrdersCount = orders.filter(o => o.status === 'received').length;
  document.getElementById('new-orders-badge').textContent = newOrdersCount;
}




    










    
    // Dados iniciais
    let orders = [];
    let products = [];
    let categories = [];
    let settings = {};
    let editingId = null;
    let currentOrderId = null;
    
    // Senha de administração
    const ADMIN_PASSWORD = "pitiu2023";
    
    // Verificação de acesso
    function checkAuth() {
      const authenticated = sessionStorage.getItem('admin-authenticated') === 'true';
      
      if (!authenticated) {
        const password = prompt("Acesso Restrito\nDigite a senha de administração:");
        
        if (password !== ADMIN_PASSWORD) {
          alert("Acesso negado!");
          window.location.href = "index.html";
        } else {
          sessionStorage.setItem('admin-authenticated', 'true');
        }
      }
    }
    
    // Carrega os dados do localStorage
    function loadData() {
      orders = JSON.parse(localStorage.getItem('orders')) || [];
      products = JSON.parse(localStorage.getItem('products')) || [];
      categories = JSON.parse(localStorage.getItem('categories')) || [];
      settings = JSON.parse(localStorage.getItem('settings')) || {};
      
      // Se não houver categorias, cria algumas padrão
      if (categories.length === 0) {
        categories = [
          { id: 'hamburgueres', name: 'Hambúrgueres Artesanais', section: '' },
          { id: 'pao-queijo', name: 'Pão de Queijo Recheado', section: '' },
          { id: 'pastelzinho', name: 'Pastelzinho', section: '' },
          { id: 'petiscos', name: 'Petiscos', section: '' },
          { id: 'bebidas', name: 'Bebidas', section: '' },
          { id: 'smoothie', name: 'Smoothie', section: '' },
          { id: 'cervejas', name: 'Cervejas', section: '' }
        ];
        localStorage.setItem('categories', JSON.stringify(categories));
      }
      
      // Se não houver produtos, cria alguns exemplos
      if (products.length === 0) {
        products = [
          {
            id: 'cheese-bacon',
            name: 'Cheese Bacon',
            description: 'Blend da casa de 180g, bacon, queijo prato, mussarela e maionese da casa no pão brioche.',
            price: 26,
            category: 'hamburgueres',
            image: 'https://source.unsplash.com/random/300x300/?burger,4',
            section: '',
            hasAddons: true
          },
          {
            id: 'frango-catupiry',
            name: 'Frango com Catupiry',
            description: 'Frango desfiado com catupiry cremoso.',
            price: 18,
            category: 'pao-queijo',
            image: 'https://source.unsplash.com/random/300x300/?cheese-bread,2',
            section: 'salty',
            hasAddons: false
          }
        ];
        localStorage.setItem('products', JSON.stringify(products));
      }
      
      // Se não houver configurações, cria padrão
      if (Object.keys(settings).length === 0) {
        settings = {
          businessName: '𝙁𝙊𝙊𝘿𝙏𝙍𝙐𝘾𝙆 𝘿𝙊 𝙋𝙄𝙏𝙄𝙐',
          businessLogo: 'logotipo1pitiu.png',
          businessLocation: '📍 Praça Saiqui, Vila Valqueire',
          businessDescription: '🛵 Cardápio impresso::Instagram::Whatsapp: é só clicar ⤵️',
          whatsappNumber: '5521992254487',
          instagramUrl: 'https://www.instagram.com/foodtruckdopitiu/',
          menuUrl: 'https://www.canva.com/design/DAFiXrcSAYE/SyFYhg2E6JroZstX3cA_hA/view?website#4',
          backgroundImage: 'backgroundfoodtruckpitiu.png'
        };
        localStorage.setItem('settings', JSON.stringify(settings));
      }
      
      // Atualiza a UI
      updateDashboardStats();
      updateOrdersList();
      updateProductsList();
      updateCategoriesList();
      loadSettings();
      
      // Verifica novos pedidos a cada 30 segundos (simulação)
      setInterval(checkNewOrders, 30000);
    }
    
    // Atualiza as estatísticas do dashboard
    function updateDashboardStats() {
      const today = new Date().toISOString().split('T')[0];
      const todayOrders = orders.filter(order => order.date.split('T')[0] === today);
      
      document.getElementById('orders-today').textContent = todayOrders.length;
      
      const revenueToday = todayOrders.reduce((sum, order) => sum + order.total, 0);
      document.getElementById('revenue-today').textContent = `R$ ${revenueToday.toFixed(2)}`;
      
      const pendingOrders = orders.filter(order => order.status === 'received' || order.status === 'preparing').length;
      document.getElementById('pending-orders').textContent = pendingOrders;
      
      const completedOrders = orders.filter(order => order.status === 'delivered').length;
      document.getElementById('completed-orders').textContent = completedOrders;
      
      // Atualiza badge de novos pedidos
      const newOrders = orders.filter(order => order.status === 'received').length;
      document.getElementById('new-orders-badge').textContent = newOrders;
      
      // Atualiza lista de pedidos recentes
      updateRecentOrdersList();
    }
    
    // Atualiza a lista de pedidos recentes no dashboard
    function updateRecentOrdersList() {
      const recentOrdersList = document.getElementById('recent-orders');
      recentOrdersList.innerHTML = '';
      
      const sortedOrders = [...orders].sort((a, b) => new Date(b.date) - new Date(a.date));
      const recentOrders = sortedOrders.slice(0, 5);
      
      recentOrders.forEach(order => {
        const row = document.createElement('tr');
        
        // Formata a data
        const orderDate = new Date(order.date);
        const formattedDate = `${orderDate.getDate()}/${orderDate.getMonth()+1} ${orderDate.getHours()}:${orderDate.getMinutes().toString().padStart(2, '0')}`;
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customer.name}</td>
          <td>${order.items.length} itens</td>
          <td>R$ ${order.total.toFixed(2)}</td>
          <td><span class="status ${order.status}">${getStatusText(order.status)}</span></td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="viewOrderDetails('${order.id}')">
              <i class="fas fa-eye"></i> Ver
            </button>
          </td>
        `;
        recentOrdersList.appendChild(row);
      });
    }
    
    // Atualiza a lista completa de pedidos
    function updateOrdersList(filter = 'all') {
      const ordersList = document.getElementById('orders-list');
      ordersList.innerHTML = '';
      
      let filteredOrders = [...orders];
      
      if (filter !== 'all') {
        filteredOrders = orders.filter(order => order.status === filter);
      }
      
      // Ordena por data (mais recente primeiro)
      filteredOrders.sort((a, b) => new Date(b.date) - new Date(a.date));
      
      filteredOrders.forEach(order => {
        const row = document.createElement('tr');
        
        // Formata a data
        const orderDate = new Date(order.date);
        const formattedDate = `${orderDate.getDate()}/${orderDate.getMonth()+1}/${orderDate.getFullYear()} ${orderDate.getHours()}:${orderDate.getMinutes().toString().padStart(2, '0')}`;
        
        row.innerHTML = `
          <td>${order.id}</td>
          <td>${order.customer.name}</td>
          <td>${order.customer.phone}</td>
          <td>${order.items.length} itens</td>
          <td>R$ ${order.total.toFixed(2)}</td>
          <td><span class="status ${order.status}">${getStatusText(order.status)}</span></td>
          <td>${formattedDate}</td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="viewOrderDetails('${order.id}')">
              <i class="fas fa-eye"></i> Ver
            </button>
          </td>
        `;
        ordersList.appendChild(row);
      });
    }
    
    // Filtra pedidos por status
    function filterOrders(status) {
      // Atualiza tabs ativas
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      event.target.classList.add('active');
      
      updateOrdersList(status);
    }
    
    // Atualiza a lista de produtos
    function updateProductsList() {
      const productsList = document.getElementById('products-list');
      productsList.innerHTML = '';
      
      products.forEach(product => {
        const category = categories.find(c => c.id === product.category) || { name: 'Sem Categoria' };
        
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${product.name}</td>
          <td>${product.description}</td>
          <td>${category.name}</td>
          <td>R$ ${product.price.toFixed(2)}</td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="editProduct('${product.id}')">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-danger" onclick="deleteProduct('${product.id}')">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        `;
        productsList.appendChild(row);
      });
    }
    
    // Atualiza a lista de categorias
    function updateCategoriesList() {
      const categoriesList = document.getElementById('categories-list');
      categoriesList.innerHTML = '';
      
      categories.forEach(category => {
        const row = document.createElement('tr');
        row.innerHTML = `
          <td>${category.name}</td>
          <td>${category.id}</td>
          <td>${category.section === 'salty' ? 'Salgado' : category.section === 'sweet' ? 'Doce' : '-'}</td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="editCategory('${category.id}')">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn btn-sm btn-danger" onclick="deleteCategory('${category.id}')">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        `;
        categoriesList.appendChild(row);
      });
    }
    
    // Carrega as configurações na UI
    function loadSettings() {
      document.getElementById('business-name').value = settings.businessName || '';
      document.getElementById('business-logo').value = settings.businessLogo || '';
      document.getElementById('business-location').value = settings.businessLocation || '';
      document.getElementById('business-description').value = settings.businessDescription || '';
      document.getElementById('whatsapp-number').value = settings.whatsappNumber || '';
      document.getElementById('instagram-url').value = settings.instagramUrl || '';
      document.getElementById('menu-url').value = settings.menuUrl || '';
      document.getElementById('background-image').value = settings.backgroundImage || '';
    }
    
    // Salva as configurações
    function saveSettings() {
      settings = {
        businessName: document.getElementById('business-name').value,
        businessLogo: document.getElementById('business-logo').value,
        businessLocation: document.getElementById('business-location').value,
        businessDescription: document.getElementById('business-description').value,
        whatsappNumber: document.getElementById('whatsapp-number').value,
        instagramUrl: document.getElementById('instagram-url').value,
        menuUrl: document.getElementById('menu-url').value,
        backgroundImage: document.getElementById('background-image').value
      };
      
      localStorage.setItem('settings', JSON.stringify(settings));
      showStatus('Configurações salvas com sucesso!', 'success');
    }
    
    // Abre o modal de detalhes do pedido
    function viewOrderDetails(orderId) {
      const order = orders.find(o => o.id === orderId);
      if (!order) return;
      
      currentOrderId = orderId;
      
      // Preenche os dados do modal
      document.getElementById('order-id').textContent = order.id;
      document.getElementById('customer-name').textContent = order.customer.name;
      document.getElementById('customer-contact').textContent = order.customer.phone;
      
      const orderDate = new Date(order.date);
      const formattedDate = `${orderDate.getDate()}/${orderDate.getMonth()+1}/${orderDate.getFullYear()} ${orderDate.getHours()}:${orderDate.getMinutes().toString().padStart(2, '0')}`;
      document.getElementById('order-date').textContent = formattedDate;
      
      document.getElementById('order-status').textContent = getStatusText(order.status);
      document.getElementById('payment-method').textContent = order.paymentMethod || 'Não especificado';
      document.getElementById('order-notes').textContent = order.notes || 'Nenhuma observação';
      
      // Preenche os itens do pedido
      const orderItems = document.getElementById('order-items');
      orderItems.innerHTML = '';
      
      order.items.forEach(item => {
        const itemElement = document.createElement('div');
        itemElement.className = 'item';
        itemElement.innerHTML = `
          <div class="item-name">${item.name} x${item.quantity}</div>
          <div class="item-price">R$ ${(item.price * item.quantity).toFixed(2)}</div>
        `;
        orderItems.appendChild(itemElement);
      });
      
      // Atualiza o total
      document.getElementById('order-total').textContent = `R$ ${order.total.toFixed(2)}`;
      
      // Configura os botões de acordo com o status
      document.getElementById('accept-order-btn').style.display = order.status === 'received' ? 'inline-block' : 'none';
      document.getElementById('prepare-order-btn').style.display = order.status === 'preparing' ? 'inline-block' : 'none';
      document.getElementById('complete-order-btn').style.display = order.status === 'ready' ? 'inline-block' : 'none';
      
      // Abre o modal
      document.getElementById('order-modal').classList.add('active');
    }
    
    // Atualiza o status de um pedido
    function updateOrderStatus(newStatus) {
      const orderIndex = orders.findIndex(o => o.id === currentOrderId);
      if (orderIndex === -1) return;
      
      orders[orderIndex].status = newStatus;
      localStorage.setItem('orders', JSON.stringify(orders));
      
      // Atualiza a UI
      updateDashboardStats();
      updateOrdersList();
      closeModal();
      
      // Envia notificação ao cliente (simulação)
      notifyCustomer(currentOrderId, newStatus);
      
      showStatus(`Status do pedido #${currentOrderId} atualizado para "${getStatusText(newStatus)}"`, 'success');
    }
    
    // Cancela um pedido
    function cancelOrder() {
      if (confirm('Tem certeza que deseja cancelar este pedido?')) {
        orders = orders.filter(o => o.id !== currentOrderId);
        localStorage.setItem('orders', JSON.stringify(orders));
        
        // Atualiza a UI
        updateDashboardStats();
        updateOrdersList();
        closeModal();
        
        showStatus(`Pedido #${currentOrderId} cancelado com sucesso!`, 'success');
      }
    }
    
    // Notifica o cliente sobre mudança de status (simulação)
    function notifyCustomer(orderId, newStatus) {
      const order = orders.find(o => o.id === orderId);
      if (!order) return;
      
      // Simulação de envio de mensagem via WhatsApp
      const statusText = getStatusText(newStatus);
      const message = `*Status do seu pedido atualizado!*\n\nPedido: #${orderId}\nNovo status: ${statusText}\n\nObrigado por escolher o FoodTruck do Pitiu!`;
      
      // Aqui você implementaria o envio real via WhatsApp
      console.log(`Enviando mensagem para ${order.customer.phone}: ${message}`);
      
      // Simulação usando link do WhatsApp
      const whatsappUrl = `https://wa.me/${order.customer.phone}?text=${encodeURIComponent(message)}`;
      console.log('Link WhatsApp:', whatsappUrl);
      // window.open(whatsappUrl, '_blank'); // Descomente para realmente enviar
    }
    
    // Abre o modal de produto
    function openProductModal(productId = null) {
      const modal = document.getElementById('product-modal');
      const title = document.getElementById('product-modal-title');
      const categorySelect = document.getElementById('product-category');
      
      // Limpa o select de categorias e preenche com as opções
      categorySelect.innerHTML = '';
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.id;
        option.textContent = category.name;
        categorySelect.appendChild(option);
      });
      
      if (productId) {
        // Modo edição
        const product = products.find(p => p.id === productId);
        if (product) {
          editingId = productId;
          title.textContent = 'Editar Produto';
          
          document.getElementById('product-name').value = product.name;
          document.getElementById('product-description').value = product.description;
          document.getElementById('product-price').value = product.price;
          document.getElementById('product-category').value = product.category;
          document.getElementById('product-image').value = product.image;
          document.getElementById('product-section').value = product.section || '';
          document.getElementById('product-addons').value = product.hasAddons ? 'true' : 'false';
        }
      } else {
        // Modo adição
        editingId = null;
        title.textContent = 'Adicionar Produto';
        
        document.getElementById('product-name').value = '';
        document.getElementById('product-description').value = '';
        document.getElementById('product-price').value = '';
        document.getElementById('product-category').value = categories.length > 0 ? categories[0].id : '';
        document.getElementById('product-image').value = '';
        document.getElementById('product-section').value = '';
        document.getElementById('product-addons').value = 'false';
      }
      
      modal.classList.add('active');
    }
    
    // Salva um produto
    function saveProduct() {
      const name = document.getElementById('product-name').value;
      const description = document.getElementById('product-description').value;
      const price = parseFloat(document.getElementById('product-price').value);
      const category = document.getElementById('product-category').value;
      const image = document.getElementById('product-image').value;
      const section = document.getElementById('product-section').value;
      const hasAddons = document.getElementById('product-addons').value === 'true';
      
      if (!name || !description || isNaN(price) || !category) {
        showStatus('Preencha todos os campos obrigatórios!', 'danger');
        return;
      }
      
      if (editingId) {
        // Atualiza produto existente
        const index = products.findIndex(p => p.id === editingId);
        if (index !== -1) {
          products[index] = {
            ...products[index],
            name,
            description,
            price,
            category,
            image,
            section,
            hasAddons
          };
        }
      } else {
        // Cria novo produto
        const id = name.toLowerCase().replace(/\s+/g, '-').replace(/[^a-z0-9-]/g, '');
        products.push({
          id,
          name,
          description,
          price,
          category,
          image,
          section,
          hasAddons
        });
      }
      
      localStorage.setItem('products', JSON.stringify(products));
      updateProductsList();
      closeModal();
      showStatus('Produto salvo com sucesso!', 'success');
    }
    
    // Edita um produto
    function editProduct(productId) {
      openProductModal(productId);
    }
    
    // Exclui um produto
    function deleteProduct(productId) {
      if (confirm('Tem certeza que deseja excluir este produto?')) {
        products = products.filter(p => p.id !== productId);
        localStorage.setItem('products', JSON.stringify(products));
        updateProductsList();
        showStatus('Produto excluído com sucesso!', 'success');
      }
    }
    
    // Abre o modal de categoria
    function openCategoryModal(categoryId = null) {
      const modal = document.getElementById('category-modal');
      const title = document.getElementById('category-modal-title');
      
      if (categoryId) {
        // Modo edição
        const category = categories.find(c => c.id === categoryId);
        if (category) {
          editingId = categoryId;
          title.textContent = 'Editar Categoria';
          
          document.getElementById('category-name').value = category.name;
          document.getElementById('category-id').value = category.id;
          document.getElementById('category-section').value = category.section || '';
        }
      } else {
        // Modo adição
        editingId = null;
        title.textContent = 'Adicionar Categoria';
        
        document.getElementById('category-name').value = '';
        document.getElementById('category-id').value = '';
        document.getElementById('category-section').value = '';
      }
      
      modal.classList.add('active');
    }
    
    // Salva uma categoria
    function saveCategory() {
      const name = document.getElementById('category-name').value;
      const id = document.getElementById('category-id').value;
      const section = document.getElementById('category-section').value;
      
      if (!name || !id) {
        showStatus('Preencha todos os campos obrigatórios!', 'danger');
        return;
      }
      
      // Valida o ID
      if (!/^[a-z0-9-]+$/.test(id)) {
        showStatus('O ID deve conter apenas letras minúsculas, números e hífens!', 'danger');
        return;
      }
      
      if (editingId) {
        // Atualiza categoria existente
        const index = categories.findIndex(c => c.id === editingId);
        if (index !== -1) {
          categories[index] = {
            ...categories[index],
            name,
            id,
            section
          };
          
          // Atualiza os produtos que usam esta categoria
          products.forEach(product => {
            if (product.category === editingId) {
              product.category = id;
            }
          });
          localStorage.setItem('products', JSON.stringify(products));
        }
      } else {
        // Verifica se o ID já existe
        if (categories.some(c => c.id === id)) {
          showStatus('Já existe uma categoria com este ID!', 'danger');
          return;
        }
        
        // Cria nova categoria
        categories.push({
          id,
          name,
          section
        });
      }
      
      localStorage.setItem('categories', JSON.stringify(categories));
      updateCategoriesList();
      updateProductsList();
      closeModal();
      showStatus('Categoria salva com sucesso!', 'success');
    }
    
    // Edita uma categoria
    function editCategory(categoryId) {
      openCategoryModal(categoryId);
    }
    
    // Exclui uma categoria
    function deleteCategory(categoryId) {
      // Verifica se há produtos nesta categoria
      const productsInCategory = products.filter(p => p.category === categoryId);
      
      if (productsInCategory.length > 0) {
        showStatus('Não é possível excluir esta categoria pois existem produtos vinculados a ela!', 'danger');
        return;
      }
      
      if (confirm('Tem certeza que deseja excluir esta categoria?')) {
        categories = categories.filter(c => c.id !== categoryId);
        localStorage.setItem('categories', JSON.stringify(categories));
        updateCategoriesList();
        showStatus('Categoria excluída com sucesso!', 'success');
      }
    }
    
    // Fecha o modal
    function closeModal() {
      document.querySelectorAll('.modal').forEach(modal => {
        modal.classList.remove('active');
      });
      editingId = null;
      currentOrderId = null;
    }
    
    // Alterna entre as abas
    function openTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
      });
      
      document.getElementById(tabId).classList.add('active');
      document.querySelector(`.nav-item[onclick="openTab('${tabId}')"]`).classList.add('active');
      
      // Atualiza o título da página
      const titles = {
        'dashboard': 'Dashboard',
        'orders': 'Pedidos',
        'products': 'Produtos',
        'categories': 'Categorias',
        'settings': 'Configurações'
      };
      
      document.getElementById('page-title').textContent = titles[tabId] || 'Dashboard';
    }
    
    // Mostra mensagem de status
    function showStatus(message, type) {
      const statusElement = document.getElementById('status-message');
      const statusText = document.getElementById('status-text');
      
      statusElement.style.display = 'flex';
      statusElement.className = `alert alert-${type}`;
      statusText.textContent = message;
      
      setTimeout(() => {
        statusElement.style.display = 'none';
      }, 5000);
    }
    
    // Converte status para texto
    function getStatusText(status) {
      const statusMap = {
        'received': 'Recebido',
        'preparing': 'Em Preparo',
        'ready': 'Pronto para Entrega',
        'delivered': 'Entregue'
      };
      
      return statusMap[status] || status;
    }
    
    // Simula verificação de novos pedidos
    function checkNewOrders() {
      // Em um sistema real, você faria uma requisição para verificar novos pedidos
      // Aqui é apenas uma simulação para demonstração
      
      const newOrdersCount = orders.filter(o => o.status === 'received').length;
      document.getElementById('new-orders-badge').textContent = newOrdersCount;
      
      if (document.getElementById('orders').classList.contains('active')) {
        updateOrdersList();
      }
      
      updateDashboardStats();
    }
    
    // Simula o logout
    function logout() {
      sessionStorage.removeItem('admin-authenticated');
      window.location.href = "index.html";
    }
    
    // Inicializa o gerenciador quando a página carrega
    window.addEventListener('DOMContentLoaded', () => {
      checkAuth();
      loadData();
    });
  </script>
</body>
</html>
